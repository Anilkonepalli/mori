#!/usr/bin/env bash

LEIN_PREFER=`which lein`

if [[ -z $LEIN_PREFER || `$LEIN_PREFER version` == "Leiningen 1"* ]]; then

export LEIN_HOME=`pwd`"/bin/.lein"

if [[ ! -d $LEIN_HOME ]]; then

mkdir $LEIN_HOME

fi

LEIN_PREFER=`pwd`"/bin/lein"

fi

if [[ ! -f $LEIN_PREFER ]]; then

echo "Leiningen not found, downloading..."

./bin/get_lein.js

chmod +x $LEIN_PREFER

fi

echo "lein path: "$LEIN_PREFER

$LEIN_PREFER $@
